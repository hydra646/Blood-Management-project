{% extends 'core/base.html' %}
{% load i18n %}
{% block content %}
<div class="container mt-4">
	<h2>{% trans "Manage Requests" %}</h2>
	<div class="table-responsive">
		<table class="table table-striped table-hover">
			<thead>
				<tr>
					<th>{% trans "User" %}</th>
					<th>{% trans "Blood Group" %}</th>
					<th>{% trans "Units" %}</th>
					<th>{% trans "City" %}</th>
					<th>{% trans "Status" %}</th>
					<th>{% trans "Actions" %}</th>
				</tr>
			</thead>
			<tbody>
				{% for r in reqs %}
				<tr>
					<td>{{ r.requester.username }}</td>
					<td>{{ r.blood_group }}</td>
					<td>{{ r.units }}</td>
					<td>{{ r.city }}</td>
					<td>{{ r.status }}</td>
					<td>
						{% if r.status == 'pending' %}
						<a class="btn btn-sm btn-success" href="{% url 'approve-request' r.pk %}">{% trans "Approve" %}</a>
						<a class="btn btn-sm btn-danger" href="{% url 'reject-request' r.pk %}">{% trans "Reject" %}</a>
						{% endif %}
					</td>
				</tr>
				{% empty %}
				<tr>
					<td colspan="6" class="text-center">{% trans "No requests." %}</td>
				</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
</div>
{% endblock %}