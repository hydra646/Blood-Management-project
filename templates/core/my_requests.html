{% extends 'core/base.html' %}
{% load static %}
{% load i18n %}
{% block content %}
<div class="container py-3">
  <div class="d-flex justify-content-between align-items-center mb-3">
  <h3 class="mb-0">{% trans "My Blood Requests" %}</h3>
  <a class="btn btn-primary" href="{% url 'create-request' %}">{% trans "Create New Request" %}</a>
  </div>
  <div class="card">
    <div class="card-body">
      <div class="table-responsive">
        <table class="table table-hover align-middle">
          <thead class="table-light">
            <tr>
              <th>{% trans "Date" %}</th>
              <th>{% trans "Group" %}</th>
              <th>{% trans "Units" %}</th>
              <th>{% trans "City" %}</th>
              <th>{% trans "Status" %}</th>
            </tr>
          </thead>
          <tbody>
            {% for r in requests %}
            <tr>
              <td>{{ r.created_at|date:"Y-m-d H:i" }}</td>
              <td>{{ r.blood_group }}</td>
              <td>{{ r.units }}</td>
              <td>{{ r.city|default:'â€”' }}</td>
              <td>
                {% if r.status == 'pending' %}
                  <span class="badge bg-warning text-dark">{% trans "Pending" %}</span>
                {% elif r.status == 'approved' %}
                  <span class="badge bg-success">{% trans "Approved" %}</span>
                {% else %}
                  <span class="badge bg-danger">{% trans "Rejected" %}</span>
                {% endif %}
              </td>
            </tr>
            {% empty %}
            <tr><td colspan="5" class="text-center">{% trans "No requests yet. Create your first request above." %}</td></tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
{% endblock %}
